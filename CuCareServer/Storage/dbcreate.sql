CREATE TABLE users (username TEXT PRIMARY KEY NOT NULL, firstname TEXT, lastname TEXT, country TEXT, city TEXT, addresslineone TEXT, addresslinetwo TEXT, postalcode TEXT, workphone TEXT, cellphone TEXT, email TEXT, workemail TEXT, birthday INTEGER, birthmonth INTEGER, birthyear INTEGER, deleted INTEGER);
CREATE TABLE physicians (username TEXT NOT NULL, physicianid INTEGER UNIQUE, FOREIGN KEY (username) REFERENCES users(username));
CREATE TABLE adminassistants (username TEXT NOT NULL, FOREIGN KEY (username) REFERENCES users (username));
CREATE TABLE sysadmins (username TEXT NOT NULL, FOREIGN KEY (username) REFERENCES users (username));
CREATE TABLE patients (patientid INTEGER PRIMARY KEY NOT NULL, firstname TEXT, lastname TEXT, country TEXT, city TEXT, addresslineone TEXT, addresslinetwo TEXT, postalcode TEXT, workphone TEXT, cellphone TEXT, email TEXT, workemail TEXT, birthday INTEGER, birthmonth INTEGER, birthyear INTEGER, addedday INTEGER, addedmonth INTEGER, addedyear INTEGER, healthcardnumber INTEGER, healthcardexpiryday INTEGER, healthcardexpirymonth INTEGER, healthcardexpiryyear INTEGER, notes TEXT, physicianid INTEGER, deleted INTEGER, FOREIGN KEY (physicianid) REFERENCES physicians (physicianid));
CREATE TABLE consultations (consultationid INTEGER PRIMARY KEY NOT NULL, physicianid INTEGER, patientid INTEGER, reason TEXT, diagnosis TEXT, status INTEGER, day INTEGER, month INTEGER, year INTEGER, comments TEXT, hours INTEGER, minutes INTEGER, deleted INTEGER, FOREIGN KEY (physicianid) REFERENCES physicians (physicianid), FOREIGN KEY (patientid) REFERENCES patients (patientid));
CREATE TABLE followups (followupid INTEGER PRIMARY KEY NOT NULL, consultationid INTEGER, dueday INTEGER, duemonth INTEGER, dueyear INTEGER, receivedday INTEGER, receivedmonth INTEGER, receivedyear INTEGER, completedday INTEGER, completedmonth INTEGER, completedyear INTEGER, status INTEGER, deleted INTEGER, FOREIGN KEY (consultationid) REFERENCES consultations (consultationid));
CREATE TABLE resultantfollowups (followupid INTEGER NOT NULL, results TEXT, FOREIGN KEY (followupid) REFERENCES followups (followupid));
CREATE TABLE medicationrenewals (followupid INTEGER NOT NULL, medication TEXT, FOREIGN KEY (followupid) REFERENCES followups (followupid));
CREATE TABLE returnconsultations (followupid INTEGER NOT NULL, nextconsultationid INTEGER, FOREIGN KEY (followupid) REFERENCES followups (followupid), FOREIGN KEY (nextconsultationid) REFERENCES consultations (consultid));
CREATE TABLE referrals (followupid INTEGER NOT NULL, specialistname TEXT, FOREIGN KEY (followupid) REFERENCES resultantfollowups (followupid));
CREATE TABLE medicaltests (followupid INTEGER NOT NULL, testtype TEXT, FOREIGN KEY (followupid) REFERENCES resultantfollowups (followupid));
